diff --git a/smali/OooO0O0/OooO0o/OooO00o/OooO0O0.smali b/smali/OooO0O0/OooO0o/OooO00o/OooO0O0.smali
index dcbdbfb0..e793d117 100644
--- a/smali/OooO0O0/OooO0o/OooO00o/OooO0O0.smali
+++ b/smali/OooO0O0/OooO0o/OooO00o/OooO0O0.smali
@@ -1144,32 +1144,10 @@
 .end method
 
 .method public static OooO0O0()Z
-    .locals 2
-
-    sget v0, Landroid/os/Build$VERSION;->SDK_INT:I
-
-    const/16 v1, 0x20
-
-    if-gt v0, v1, :cond_1
-
-    if-ne v0, v1, :cond_0
-
-    sget v0, Landroid/os/Build$VERSION;->PREVIEW_SDK_INT:I
-
-    if-lez v0, :cond_0
-
-    goto :goto_0
-
-    :cond_0
-    const/4 v0, 0x0
-
-    goto :goto_1
+    .locals 1
 
-    :cond_1
-    :goto_0
     const/4 v0, 0x1
 
-    :goto_1
     return v0
 .end method
 
diff --git a/smali_classes3/com/android/camera/CameraIntentManager.smali b/smali_classes3/com/android/camera/CameraIntentManager.smali
index b03e2600..5122d7fa 100644
--- a/smali_classes3/com/android/camera/CameraIntentManager.smali
+++ b/smali_classes3/com/android/camera/CameraIntentManager.smali
@@ -307,41 +307,10 @@
 .end method
 
 .method public static isStartActivityWhenLocked(Landroid/content/Intent;)Z
-    .locals 2
-
-    const/4 v0, 0x0
-
-    if-eqz p0, :cond_0
-
-    const-string v1, "StartActivityWhenLocked"
-
-    invoke-virtual {p0, v1, v0}, Landroid/content/Intent;->getBooleanExtra(Ljava/lang/String;Z)Z
-
-    move-result p0
-
-    if-eqz p0, :cond_0
+    .locals 1
 
     const/4 v0, 0x1
 
-    :cond_0
-    new-instance p0, Ljava/lang/StringBuilder;
-
-    invoke-direct {p0}, Ljava/lang/StringBuilder;-><init>()V
-
-    const-string/jumbo v1, "start activity when locked: "
-
-    invoke-virtual {p0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
-
-    invoke-virtual {p0, v0}, Ljava/lang/StringBuilder;->append(Z)Ljava/lang/StringBuilder;
-
-    invoke-virtual {p0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
-
-    move-result-object p0
-
-    const-string v1, "CameraIntentManager"
-
-    invoke-static {v1, p0}, Lcom/android/camera/log/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
-
     return v0
 .end method
 
@@ -1640,15 +1609,17 @@
 .end method
 
 .method public isFromVolumeKey()Ljava/lang/Boolean;
-    .locals 3
+    .locals 5
 
     iget-object v0, p0, Lcom/android/camera/CameraIntentManager;->mIntent:Landroid/content/Intent;
 
     const-string v1, "com.android.systemui.camera_launch_source"
 
-    invoke-virtual {v0, v1}, Landroid/content/Intent;->getStringExtra(Ljava/lang/String;)Ljava/lang/String;
+    const/4 v2, -0x1
 
-    move-result-object v0
+    invoke-virtual {v0, v1, v2}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I
+
+    move-result v0
 
     new-instance v1, Ljava/lang/StringBuilder;
 
@@ -1658,7 +1629,7 @@
 
     invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
-    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+    invoke-virtual {v1, v0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;
 
     invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
 
@@ -1676,19 +1647,22 @@
 
     move-result v1
 
-    const-string/jumbo v2, "power_double_tap"
+    const/4 v4, 0x1
 
     if-eqz v1, :cond_0
 
-    invoke-static {v0, v2}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    const/4 v2, 0x1
 
-    move-result p0
+    if-eq v0, v4, :cond_3
 
-    invoke-static {p0}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;
+    const/4 v2, 0x0
 
-    move-result-object p0
+    :cond_3
+    invoke-static {v2}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;
 
-    return-object p0
+    move-result-object v2
+
+    return-object v2
 
     :cond_0
     iget-object p0, p0, Lcom/android/camera/CameraIntentManager;->mIntent:Landroid/content/Intent;
@@ -1703,35 +1677,9 @@
 
     if-eqz p0, :cond_2
 
-    invoke-static {v0, v2}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2
-
-    const-string p0, "double_click_volume_down"
-
-    invoke-static {v0, p0}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2
-
-    const-string/jumbo p0, "stabilizer"
-
-    invoke-static {v0, p0}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
-
-    move-result p0
-
-    if-nez p0, :cond_2
-
-    const-string/jumbo p0, "miwatch"
+    if-eq v0, v4, :cond_2
 
-    invoke-static {v0, p0}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
-
-    move-result p0
-
-    if-eqz p0, :cond_1
+    goto :cond_1
 
     goto :goto_0
 
@@ -2139,25 +2087,21 @@
 
     const-string v0, "com.android.systemui.camera_launch_source"
 
-    invoke-virtual {p0, v0}, Landroid/content/Intent;->getStringExtra(Ljava/lang/String;)Ljava/lang/String;
-
-    move-result-object p0
-
-    const-string v0, "lockscreen_affordance"
+    const/4 v1, -0x1
 
-    invoke-static {p0, v0}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    invoke-virtual {p0, v0, v1}, Landroid/content/Intent;->getIntExtra(Ljava/lang/String;I)I
 
-    move-result v0
+    move-result p0
 
-    if-nez v0, :cond_1
+    const/4 v1, 0x1
 
-    const-string/jumbo v0, "power_double_tap"
+    if-eq p0, v1, :cond_1
 
-    invoke-static {p0, v0}, Landroid/text/TextUtils;->equals(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
+    const/4 v1, 0x3
 
-    move-result p0
+    if-eq p0, v1, :cond_1
 
-    if-eqz p0, :cond_2
+    goto :cond_2
 
     :cond_1
     const/4 v2, 0x1
diff --git a/smali_classes3/com/android/camera/GalleryHelper.smali b/smali_classes3/com/android/camera/GalleryHelper.smali
index f141501a..c1a44fc9 100644
--- a/smali_classes3/com/android/camera/GalleryHelper.smali
+++ b/smali_classes3/com/android/camera/GalleryHelper.smali
@@ -469,9 +469,13 @@
 
     invoke-direct {p0, v0}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
 
-    const-string v0, "com.miui.gallery"
+    const-string v0, "android.intent.category.APP_GALLERY"
 
-    invoke-virtual {p0, v0}, Landroid/content/Intent;->setPackage(Ljava/lang/String;)Landroid/content/Intent;
+    invoke-virtual {p0, v0}, Landroid/content/Intent;->addCategory(Ljava/lang/String;)Landroid/content/Intent;
+
+    const v0, 0x10000000
+
+    invoke-virtual {p0, v0}, Landroid/content/Intent;->addFlags(I)Landroid/content/Intent;
 
     invoke-virtual {p1, p0}, Landroid/app/Activity;->startActivity(Landroid/content/Intent;)V
 
@@ -504,7 +508,7 @@
 
     move-result p0
 
-    const-string v0, "com.android.camera.action.REVIEW"
+    const-string v0, "android.provider.action.REVIEW"
 
     if-eqz p0, :cond_0
 
@@ -540,7 +544,7 @@
     :cond_1
     const-string p0, "GalleryHelper"
 
-    const-string p1, "gotoGallery: com.android.camera.action.REVIEW"
+    const-string p1, "gotoGallery: android.provider.action.REVIEW"
 
     invoke-static {p0, p1}, Lcom/android/camera/log/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
@@ -549,10 +553,6 @@
     invoke-direct {p0, v0, p2}, Landroid/content/Intent;-><init>(Ljava/lang/String;Landroid/net/Uri;)V
 
     :goto_0
-    const-string p1, "com.miui.gallery"
-
-    invoke-virtual {p0, p1}, Landroid/content/Intent;->setPackage(Ljava/lang/String;)Landroid/content/Intent;
-
     const/4 p1, 0x1
 
     const-string p2, "from_MiuiCamera"
diff --git a/smali_classes3/com/android/camera/Util.smali b/smali_classes3/com/android/camera/Util.smali
index 7cbd0d45..f50708c7 100644
--- a/smali_classes3/com/android/camera/Util.smali
+++ b/smali_classes3/com/android/camera/Util.smali
@@ -204,7 +204,7 @@
 
 .field public static final REQUEST_CODE_OPEN_MIUI_EXTRA_PHOTO:I = 0x8c35
 
-.field public static final REVIEW_ACTION:Ljava/lang/String; = "com.android.camera.action.REVIEW"
+.field public static final REVIEW_ACTION:Ljava/lang/String; = "android.provider.action.REVIEW"
 
 .field public static final REVIEW_ACTION_IN_MULTI_WINDOW:Ljava/lang/String; = "com.android.camera.action.SPILIT_SCREEN_REVIEW"
 
diff --git a/smali_classes5/com/xiaomi/protocol/ICustomCaptureResult.smali b/smali_classes5/com/xiaomi/protocol/ICustomCaptureResult.smali
index d78a1d43..55dfcb54 100644
--- a/smali_classes5/com/xiaomi/protocol/ICustomCaptureResult.smali
+++ b/smali_classes5/com/xiaomi/protocol/ICustomCaptureResult.smali
@@ -310,7 +310,7 @@
 .end method
 
 .method public static toTotalCaptureResult(Lcom/xiaomi/protocol/ICustomCaptureResult;IZ)Landroid/hardware/camera2/TotalCaptureResult;
-    .locals 23
+    .locals 24
 
     const-string v0, "android.hardware.camera2.impl.PhysicalCaptureResultInfo"
 
@@ -393,7 +393,7 @@
 
     if-lt v7, v8, :cond_0
 
-    const/16 v7, 0xb
+    const/16 v7, 0xd
 
     :try_start_1
     new-array v8, v7, [Ljava/lang/Class;
@@ -446,6 +446,18 @@
 
     aput-object v19, v8, v21
 
+    const/16 v22, 0xb
+
+    sget-object v19, Ljava/lang/Boolean;->TYPE:Ljava/lang/Class;
+
+    aput-object v19, v8, v22
+
+    const/16 v23, 0xc
+
+    sget-object v19, Ljava/lang/Long;->TYPE:Ljava/lang/Class;
+
+    aput-object v19, v8, v23
+
     invoke-virtual {v1, v8}, Ljava/lang/Class;->getDeclaredConstructor([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
 
     move-result-object v8
@@ -520,6 +532,18 @@
 
     aput-object v19, v7, v21
 
+    invoke-static/range {v16 .. v16}, Ljava/lang/Boolean;->valueOf(Z)Ljava/lang/Boolean;
+
+    move-result-object v21
+
+    aput-object v21, v7, v22
+
+    invoke-static/range {v16 .. v16}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
+
+    move-result-object v21
+
+    aput-object v21, v7, v23
+
     invoke-virtual {v8, v7}, Ljava/lang/reflect/Constructor;->newInstance([Ljava/lang/Object;)Ljava/lang/Object;
 
     move-result-object v1
